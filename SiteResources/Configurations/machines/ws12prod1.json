{
	"WS12PROD1": {
		"Services": {
			"Canal33.db": {
				"instance": "PROD",
				"databases": [
					"Canal33"
				],
				"workloads": {
					"canal33.live.morning": [
						{
							"label": "(Production Live) Sauvegarde quotidienne de la base Canall33",
							"commands": [
								"dbms.pl backup -service Canal33.db -full",
								"ttp.pl copydirs -sourcecmd \"dbms.pl vars -backupsDir\" -targetcmd \"dbms.pl vars -archivesDir\" -dirs"
							]
						}
					],
					"canal33.live.every.5h": [
						{
							"label": "(Production Live) Sauvegarde différentielle en journée",
							"commands_x": [
								"-> désactivée sur ns230134 faute d'espace disque suffisant",
								"dbms.pl backup -service Canal33.db -diff",
								"ttp.pl copydirs -sourcecmd \"dbms.pl vars -backupsDir\" -targetcmd \"dbms.pl vars -archivesDir\" -dirs"
							]
						}
					],
					"canal33.live.evening": [
					],
					"canal33.backup": [
						{
							"label": "(PRODUCTION BACKUP) Surveillance, transfert et restauration des sauvegardes de la production",
							"commands": [
								"daemon.pl stop -json [eval:$TTPVars->{config}{site}{daemonsDir}]\\canal33-backup-monitor-daemon.json -ignore -wait 2",
								"daemon.pl start -json [eval:$TTPVars->{config}{site}{daemonsDir}]\\canal33-backup-monitor-daemon.json NS230134"
							]
						}
					]
				}
			},
			"Canal33.www": {
			},
			"Canal33.ftp": {
			},
			"Canal33.http": {
			},
			"Dom.2008": {
				"workloads": {
					"daily.morning": [
						{
							"label": "Sauvegarde quotidienne des bases Dom",
							"commands": [
								"dbms.pl backup -instance PROD -database Dom1 -full",
								"dbms.pl backup -instance PROD -database Dom33 -full",
								"ttp.pl copydirs -sourcecmd \"dbms.pl vars -backupsDir\" -targetcmd \"dbms.pl vars -archivesDir\" -dirs"
							]
						}
					]
				}
			},
			"Technical.Services": {
				"hidden": true,
				"workloads": {
					"daily.morning": [
						{
							"label": "Purge backups directory",
							"order": "00",
							"order_comments": [
								"ns230134 has very low free space on its local disk, just enough for one backup set, not two.",
								"Make sure the SQLBackups is empty before our daily full backups. It will be immediately copied to the archive, and moved again to the archive at evening."
							],
							"commands": [
								"ttp.pl pull -nohelp",
								"ttp.pl purgedirs -dircmd \"dbms.pl vars -backupsRoot\" -keep 0",
								"ttp.pl purgedirs -dircmd \"dbms.pl vars -archivesRoot\" -keep 5",
								"ttp.pl purgedirs -dircmd \"ttp.pl vars -logsRoot\" -keep 7"
							]
						},
						{
							"label": "Do something at the end of the daily.morning workload",
							"order": "zz",
							"commands": [
							]
						}
					],
					"daily.evening": [
						{
							"label": "Do something at the evening",
							"commands": [
							]
						}
					],
					"startup": [
						{
							"label": "Advertize at startup",
							"commands": [
								"call C:\\INLINGUA\\SiteResources\\Commands\\startup.cmd"
							]
						}
					]
				}
			}
		},
		"DBMSInstancesComments": [
		],
		"DBMSInstances": {
			"PROD": {
				"package": "Mods::SqlServer",
				"accounts": {
					"sa": "gPtPUWj85hzcnENZsoUm"
				},
				"dataPath": "C:\\Program Files\\Microsoft SQL Server\\MSSQL11.PROD\\MSSQL\\DATA"
			}
		},
		"dbms": {
			"archivesRoot": "\\\\ftpback-rbx7-618.ovh.net\\ns3153065.ip-51-91-25.eu\\[eval:uc hostname]\\SQLBackups"
		},
		"remoteShare": "\\\\10.122.1.13\\C",
		"MQTT": {
			"broker": "10.122.1.15",
			"username": "[eval:uc hostname]",
			"passwd": "EnErVQsFRO0jFeTP1a3C"
		}
	}
}
